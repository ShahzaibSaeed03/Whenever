<ng-container *ngIf="!workupload">
  <div class="max-w-2xl mx-auto mt-8 bg-[#cfe6ef] font-semibold text-[#3f85ae] border border-gray-300 p-6">

    <!-- Instructions -->
    <p class="text-[14px]  mb-4">
      In addition to your work, we advise you to upload your drafts (even handwritten - take photos) <br> 
      and the various intermediate versions. 
      <span class="text-green-700 font-bold cursor-pointer" routerLink="/upload-faq">
        For more information, please read this FAQ.
      </span>
      <br>
      Gather all your files in a zip file, and upload it.<br>
      Please note that the size of the uploaded file is limited to 120 MB.<br>
      Javascript and .exe files are not accepted.
    </p>

    <!-- Title -->
    <div class="mb-3 flex">
      <label class="block text-[13px] w-[40%]  mb-1">Title of your Work</label>
      <input id="workTitle" [(ngModel)]="workTitle" type="text" placeholder="up to 200 characters"
        class="w-full border border-gray-400 bg-white px-2  text-sm rounded-none" />
    </div>

    <!-- Copyright Owner -->
    <div class="mb-3 flex">
      <label class="block text-[13px] w-[40%]  mb-1">Copyright Owner Name</label>
      <input id="copyrightOwner" [(ngModel)]="copyrightOwner" type="text"
        class="w-full border border-gray-400 bg-white px-2  text-sm rounded-none" />
    </div>
<br>
    <!-- Additional Owners -->
    <div class="mb-3 flex">
      <label class="block text-[13px] w-[40%]  mb-1">Additional Copyright Owners</label>
      <input id="additionalOwners" [(ngModel)]="additionalOwners" type="text"
        class="w-full border border-gray-400 bg-white px-2  text-sm rounded-none" />
    </div>
<br>
    <!-- File Upload -->
 <div class="flex items-center mb-5 w-xl mx-auto">
  <button type="button"
    class="bg-[#507897] rounded-md text-white mx-3.5 px-5 py-1 text-sm font-semibold"
    (click)="fileInput.click()">
    CHOOSE FILE
  </button>

  <!-- Text input to show file name -->
  <input type="text"
    [value]="fileName"
    placeholder=""
    readonly
    class=" border border-gray-400 bg-white px-2  text-sm rounded-none ml-2"
  />

  <!-- Hidden actual file input -->
  <input type="file" #fileInput (change)="onFileChange($event)" hidden />
</div>

<br>
  
<div class="sm:w-xl w-fit mx-auto">

    <!-- Warning -->
<p class="text-[13px] sm:text-[14px] md:text-[15px] text-red-600 font-bold uppercase mb-4 break-words leading-relaxed px-2">
  PLEASE PAY ATTENTION: AFTER CLICKING ON THE “UPLOAD THIS WORK” BUTTON,<br>
  YOU WON’T BE ABLE TO MODIFY THE UPLOADED FILE, NOR ANY <br> INFORMATION IN  THE ABOVE FIELDS.
</p>



    <!-- Upload Button -->
    <button (click)="upload()" [disabled]="isUploading"
      class="bg-red-600 rounded-md hover:bg-red-700 text-white px-4 py-1 text-sm font-bold uppercase w-full sm:w-auto">
      UPLOAD THIS WORK
    </button>
    </div>

  </div>
</ng-container>


<!-- Certificate Display -->
<ng-container *ngIf="workupload">
  <div class="fixed inset-0 bg-black/60 flex justify-center flex-col items-center z-50 px-0 sm:px-0 ">
    
    <!-- Certificate Box -->
    <div class="rounded-lg shadow-lg p-4 sm:p-6 relative bg-white w-full max-w-full sm:max-w-2xl bg-image">

      <!-- Close Button (relative to certificate) -->
      <!-- Close Button (relative to certificate) -->
<button class="absolute -top-10 right-2 border border-gray-300 bg-red-700 text-white 
  rounded-md px-5 py-1 text-2xl shadow-lg"
  (click)="closeDetailbox()">
  &times;
</button>


      <div class="certificate space-y-3 mt-12 sm:space-y-6 sm:mt-12 text-sm sm:text-base text-gray-700 break-words">
        
 <table class="w-full text-sm relative z-10 border-separate border-spacing-y-3">
  <tr>
    <td class="font-semibold pr-4">Work Title :</td>
    <td>{{ uploadedData?.title }}</td>
  </tr>
  <tr>
    <td class="font-semibold pr-4">Copyright Owner :</td>
    <td>{{ uploadedData?.copyrightOwner }}</td>
  </tr>
  <tr *ngIf="uploadedData?.additionalOwners">
    <td class="font-semibold pr-4 whitespace-nowrap">Additional Owners :</td>
    <td>{{ uploadedData?.additionalOwners }}</td>
  </tr>
  <tr>
    <td class="font-semibold pr-4 whitespace-nowrap">Reference number :</td>
    <td>{{ uploadedData?.displayed_id }}</td>
  </tr>
  <tr>
    <td class="font-semibold pr-4 whitespace-nowrap">Registration Date :</td>
    <td>{{ uploadedData?.registration_date | date:'MM/dd/yyyy, h:mm:ss a' }}</td>
  </tr>
  <tr>
    <td class="font-semibold pr-4 whitespace-nowrap">Timestamping Authority :</td>
    <td>Open Timestamps</td>
  </tr>
  <tr>
    <td class="font-semibold pr-4 whitespace-nowrap">Copyrighted File name :</td>
    <td>  <a [href]="uploadedData?.original_file_url" target="_blank"
     class=" break-all block sm:inline">
    {{ uploadedData?.fileName }}
  </a></td>
    
  </tr>
  <tr>
    <td class="font-semibold pr-4 whitespace-nowrap">File SHA256 fingerprint :</td>
    <td class="break-all">{{ uploadedData?.fingerprint }}</td>
  </tr>
</table>


      </div>
    </div>
  </div>
</ng-container>


<!-- Error Modal -->
<ng-container *ngIf="showError">
  <div class="fixed inset-0 bg-black/50 flex justify-center items-center z-50 px-4 sm:px-0">
    <div class="bg-white rounded-lg shadow-lg p-4 sm:p-6 relative max-w-sm w-full">
      <button class="absolute top-2 right-2 text-xl font-bold text-gray-700" (click)="closeError()">&times;</button>
      <div class="flex items-center gap-2 mb-3 ">
        <i class="fas fa-exclamation-circle text-red-600 text-2xl"></i>
        <h2 class="text-red-600 text-lg font-semibold">Pay Attention</h2>
      </div>
      <p class="text-gray-700 whitespace-pre-line">{{ errorMessage }}</p>
    </div>
  </div>
</ng-container>
<!-- Spinner Overlay -->
<div *ngIf="isUploading"
     class="fixed inset-0 bg-black/40 flex justify-center items-center z-50">
  <img class="loader-spinner"
       src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/82/loader-spinner.png" />
</div>
