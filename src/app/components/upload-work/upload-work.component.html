<!-- Upload Form -->
<ng-container *ngIf="!workupload">
  <div class="max-w-3xl mx-auto mt-12  bg-blue-100 border border-gray-200 rounded-lg shadow-sm p-6 sm:p-8">

    <p class="text-lg font-semibold text-[#507897] mb-6">
      Upload your drafts and final work files (zip recommended). Max size 120 MB. Javascript & .exe files not allowed.
      <span class="text-green-700 cursor-pointer" routerLink="/upload-faq"> Read FAQ.</span>
    </p>

    <!-- Work Title -->
    <div class="mb-4 flex justify-between items-center">
      <label for="workTitle" class="block text-md font-bold text-[#507897] w-[40%]">Title of your work</label>
      <input id="workTitle" [(ngModel)]="workTitle" type="text" placeholder="Upto 200 characters"
        class="block w-full text-sm text-gray-700 border bg-white border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500" />
    </div>

    <!-- Copyright Owner -->
    <div class="mb-4 flex justify-between items-center">
      <label for="copyrightOwner" class="block text-md font-bold text-[#507897] w-[40%]">Copyright Owner Name</label>
      <input id="copyrightOwner" [(ngModel)]="copyrightOwner" type="text"
        class="block w-full text-sm text-gray-700 border bg-white border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500" />
    </div>

    <!-- Additional Owners -->
    <div class="mb-4 flex justify-between items-center">
      <label for="additionalOwners" class="block text-md font-bold text-[#507897] w-[40%]">Additional Copyright
        Owners</label>
      <input id="additionalOwners" [(ngModel)]="additionalOwners" type="text"
        class="block w-full text-sm text-gray-700 border bg-white border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500" />
    </div>

    <!-- Owner -->
 

    <!-- File Upload -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 items-center mb-6 max-w-xl mx-auto">
      <div class="bg-[#507897] text-white uppercase font-medium flex items-center gap-2 w-fit px-9 py-2 rounded-md">
        <i class="fas fa-file-alt text-white"></i> Choose File
      </div>
      <div class="sm:col-span-2">
        <input type="file" (change)="onFileChange($event)"
          class="block w-full text-sm text-gray-700 border bg-white border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500" />
      </div>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage"
      class="bg-red-50 border border-red-200 text-red-700 text-sm px-4 py-2 rounded mb-4 flex items-start gap-2 whitespace-pre-line">
      <i class="fas fa-exclamation-circle mt-1"></i>
      {{ errorMessage }}
    </div>

    <!-- Warning -->
    <p class="text-md text-red-600 mt-5 font-semibold w-xl">
      AFTER CLICKING ON “UPLOAD THIS WORK”, YOU WON’T BE ABLE TO MODIFY FILES OR INFORMATION.
    </p>

    <!-- Upload Button -->
    <button (click)="upload()" [disabled]="isUploading"
      class="bg-red-700 hover:bg-red-800 cursor-pointer text-white text-sm font-semibold rounded-md flex justify-center items-center gap-2 transition w-fit px-9 py-2 ">
      <i class="fas fa-cloud-upload-alt"></i>
      Upload This Work
      <span *ngIf="isUploading" class="ml-2 animate-spin fas fa-spinner"></span>
    </button>
  </div>
</ng-container>

<!-- Certificate Display -->
<ng-container *ngIf="workupload" >
  <div class="fixed inset-0 bg-black/60 flex justify-center flex-col items-center z-50 px-4">
    <button class="absolute top-2 right-10 sm:right-70 border-white border text-white bg-red-700 rounded-md px-4 py-2 text-2xl"
        (click)="closeDetailbox()">&times;</button>
    <div class=" rounded-lg shadow-lg p-6 relative bg-image">
      

      <div
        class="certificate space-y-6 mt-12 text-sm text-gray-700  ">
        <p><strong>Work Title:</strong> {{ uploadedData?.title }}</p>
        <p><strong>Copyright Owner:</strong>{{ uploadedDatas?.owner || copyrightOwner }}</p>
        <p *ngIf="uploadedData?.additionalOwners"><strong>Additional Copyright Owners:</strong> {{
          uploadedData?.additionalOwners }}</p>
        <p><strong>Reference Number:</strong> {{ uploadedData?.displayed_id }}</p>
        <p><strong>Registration Date:</strong> {{ uploadedData?.registration_date | date:'dd MMM yyyy HH:mm:ss' }}</p>
        <p><strong>Timestamping Authority:</strong> Open Timestamps</p>
        <p><strong>Copyrighted File Name:</strong>   <a [href]="uploadedData?.original_file_url" target="_blank" class="text-blue-600 underline">
            {{ uploadedDatas?.file_name }}
          </a>
        <p><strong>File SHA256 Fingerprint:</strong> {{ uploadedData?.fingerprint }}</p>
      </div>

     
    </div>
     <div class="mt-4 flex justify-center gap-3">
        <a [href]="uploadedData?.certificate_url" target="_blank"
          class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Download Certificate</a>
        <a [href]="uploadedData?.ots_url" target="_blank"
          class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">Download OTS</a>
      </div>
  </div>
</ng-container>